---
import { fetchAll } from '~/queries/SemesterWithClasses.ts';

import SemesterWithClasses from './SemesterWithClasses.astro';
import type { ClassType } from '~/queries/ClassType';

export interface Props {
  classType?: ClassType;
  debug?: boolean;
}

const { classType = '', debug = false } = Astro.props;

const semesters = await fetchAll({ classType });

if (debug) {
  console.log(semesters[0].semester);
}
---

{semesters.map(({ semester, classes }) => <SemesterWithClasses semester={semester} classes={classes} />)}
