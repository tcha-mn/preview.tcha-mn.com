---
import { Icon } from 'astro-icon/components';
---

<script>
  const initMailerLite = () => {
    const func = 'ml';
    delete window[func];
    (function (w, d, e, u, f) {
      w[f] =
        w[f] ||
        function () {
          (w[f].q = w[f].q || []).push(arguments);
        };
      const l = d.createElement(e) as HTMLScriptElement;
      l.async = true;
      l.src = u;
      const n = d.getElementsByTagName(e)[0];
      n.parentNode?.insertBefore(l, n);
    })(window, document, 'script', 'https://assets.mailerlite.com/js/universal.js', func);
    window[func]('account', '183132');
  };
  document.addEventListener('astro:page-load', initMailerLite);
</script>
<!-- Modal toggle -->
<button
  title="Join our mailing list"
  data-modal-target="subscribe-modal"
  data-modal-toggle="subscribe-modal"
  class="fixed bottom-10 right-10 flex h-12 w-12 items-center justify-center rounded-2xl rounded-bl-sm bg-primary text-center text-sm font-medium text-white hover:bg-darkMode dark:bg-secondary dark:text-primary hover:dark:bg-primary hover:dark:text-white"
  type="button"
>
  <Icon title="Join our mailing list" name="tabler:at" class="text-xl" />
</button>

<!-- Main modal -->
<div
  id="subscribe-modal"
  tabindex="-1"
  aria-hidden="true"
  class="fixed left-0 right-0 top-0 z-50 hidden h-[calc(100%-1rem)] max-h-full w-full items-center justify-center overflow-y-auto overflow-x-hidden md:inset-0"
>
  <div class="ml-embedded" data-form="0rw08R"></div>
</div>
